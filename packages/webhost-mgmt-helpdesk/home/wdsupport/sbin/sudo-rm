#!/bin/sh

. /home/wdsupport/sbin/_functions

FORCE=0
RECURSIVE=0

# Defines ARG array based on arguments
for var in "$@"; do
	case $var in
	"-f")
		FORCE=1
		;;
	"-r")
		RECURSIVE=1
		;;
	"-fr")
		FORCE=1
		RECURSIVE=1
		;;
	*)
		# Load arguments into an array
		ARG[${#ARG[@]}]=$var
		;;
	esac
done

element_count=${#ARG[@]}

if [ ! "$element_count" = "1" ]; then
	echo "Usage: sudo-rm [-fr] object"
	echo
	exit	
fi

vhostPathOut="`isVhostPath ${ARG[0]}`"

if [ "$?" = "0" ]; then
	echo "$vhostPathOut"
	echo "Invalid rm path. Exiting."
	echo
	exit
else
	vhostPath="$vhostPathOut"
fi

rm="rm"
if [ "$FORCE" = "1" ]; then
	rm="$rm -f"
fi
if [ "$RECURSIVE" = "1" ]; then
	rm="$rm -r"
fi

$rm $vhostPath
